# 微服务简述

## 概念

- **微服务**是一种**软件架构风格**，它将一个大型复杂应用，拆分为一组**小型的、松散耦合的、可独立部署的服务的集合**



## 理解

### 概念理解

- 对于初学者，一个 **“服务” **就可以理解为**一个独立运行的、只专注于做一件特定业务的小项目**

  - 整个系统**不再是一个庞大的单体项目**，而是由许多**独立的“小项目”**  **协同工作**  来提供完整的业务能力

  > 其实吧，要是需要说说“项目”和“服务”的区别
  >
  > - **“项目”** 更倾向于**物理静态层面**，比如代码文件夹什么的
  > - **“服务”** 更倾向于**灵动层面**，比如进行啊，ing(英语中的进行时)啊，叽里咕噜什么什么的

  

### 举例理解

- **在以前的单体架构里**

  - 整个电商网站是一个巨大的“项目”

    用户管理、商品展示、下订单、支付所有功能都混在一个代码库里，打包成一个程序运行



- **而在微服务架构里**：我们会按业务边界进行拆分：

  - **用户服务**
    - 一个独立的**项目/应用**
    - **单一职责**：只处理用户相关的业务（注册、登录、资料修改等）
    - **数据隔离**：有自己独立的数据库，只存放用户信息
    - **可独立部署**：可以随时更新上线，而不影响商品或订单功能

  - **商品服务**
    - 另一个独立的**项目/应用**
    - **单一职责**：只管理商品信息（上下架、价格、库存等）
    - **数据隔离**：有自己的数据库

  - **订单服务**：

    - 又一个独立的**项目/应用**

    - **单一职责**：只负责处理订单流程

    - **通过API通信**：

      - 当它需要用户信息时（比如获取收货地址），

        它不会直接访问用户数据库，而是通过网络去**调用“用户服务”提供的API**，

        说：“请把ID为123的用户信息告诉我”



## 单体VS微服务

### 以前的单体架构

- **单体架构**：

  - 将应用程序的所有功能都打包在一个单元中

    > 比如一个电商网站，用户管理、商品管理、订单处理、支付功能等所有模块都在同一个代码库里，最终部署为单个可执行文件或 Web 应用

  - **优点**：开发简单，易于测试和部署

  - **缺点**：

    - 随着功能增多，代码库变得臃肿，难以维护；
    - 技术栈单一，无法灵活选择；
    - 任何微小的修改都需要重新部署整个应用；
    - 可扩展性差，只能整体扩展，造成资源浪费



### 全新的微服务架构

#### 核心特性

- **服务组件化**：每个微服务都是一个可独立替换和升级的组件

- **围绕业务能力组织**：
  - 团队不再按技术分层（如前端、后端、数据库团队），而是围绕业务功能组建跨职能团队
  - 例如，一个“订单团队”会负责所有与订单相关的服务

- **去中心化治理**：
  - 每个服务团队可以自由选择最适合其业务场景的技术栈（编程语言、数据库、框架等），不受限于其他服务

- **去中心化数据管理**：
  - 每个服务通常有自己独立的数据库
  - 这避免了单体应用中“一库天下”的模式，保证了服务的自治性，但也带来了数据一致性的挑战

- **基础设施自动化**：微服务架构的复杂性要求高度自动化的持续集成（CI）和持续部署（CD）流程，以及强大的运维监控体系

- **高容错性设计**：

  - 在分布式系统中，任何服务调用都可能失败

    因此，架构设计必须考虑到服务故障、网络延迟等问题，并具备服务降级、熔断等机制，以确保一个服务的失败不会导致整个系统崩溃



#### 微服务的挑战与缺点

- **分布式系统复杂性**：开发人员需要处理网络延迟、服务间通信、数据一致性、容错等分布式系统固有的问题

- **运维开销**：

  - 需要部署、管理、监控大量的服务实例，这对自动化运维（DevOps）能力提出了极高的要求

    你需要强大的服务发现、配置管理、日志聚合、监控告警等工具

- **数据一致性**：
  - 跨多个服务的事务处理变得非常复杂。通常需要采用最终一致性和Saga模式等方案来解决，这比传统的 ACID 事务更难实现

- **测试复杂性**：
  - 对单个服务的测试很简单，但进行跨服务的端到端集成测试则非常困难

- **服务间的依赖管理**：需要仔细管理服务之间的调用关系和版本兼容性，避免出现循环依赖或版本冲突



# SpringCloud 相关概念简述

## 基本概念

- Spring Cloud 并非一个单一的技术，它也并不是一个框架，而是 **Spring官方提供的一整套完整的微服务解决方案**

  > 简单来说，**Spring Cloud 就是 Spring 官方提供的 一整套** **用于构建微服务架构** 的“全家桶”或“工具箱”



## 微服务解决方案小拓展

- 我们已经知道，**SpringCloud** 是 **一整套完整的微服务解决方案**
  - 那还有没有**别的微服务解决方案**呢
    - 当然是有的，**Spring Cloud** 毫无疑问是 **Java 生态中最主流、最全面**的**微服务解决方案**，但它绝对不是唯一的选择。例如：
      - **Service Mesh (服务网格)** 
      - **Apache Dubbo**
      - **......**



## 组件

- **“组件”**是 SpringCloud 中的一部分，它是 SpringCloud 中 **某个特定领域的解决方案**



# 组件

## 服务通信